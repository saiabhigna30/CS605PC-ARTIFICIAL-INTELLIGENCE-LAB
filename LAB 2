<!DOCTYPE html>
<html>
<head>
<title>BFS</title>
<link rel="stylesheet" href="https://pyscript.net/releases/2025.11.2/core.css" />
        <script type="module" src="https://pyscript.net/releases/2025.11.2/core.js"></script>
<style>
.box{
          border:2px solid #3498db; 
          border-radius:10px;
}
</style>
</head>
<body>
<div class="box">
<h1>TIC TAC TOE</h1>
  <py-script>
import random
from js import document
from collections import deque
from pyscript import display

# -------- Node --------

class Node:
    def __init__(self, state, parent=None, action=None):
        self.state = state
        self.parent = parent
        self.action = action

    def path(self):
        node = self
        path_back = []
        while node:
            path_back.append(node)
            node = node.parent
        return list(reversed(path_back))


# -------- Problem --------

class Problem:
    def __init__(self, initial):
        self.initial = initial
    def action(self, state):
        raise NotImplementedError
    def result(self, state, action):
        raise NotImplementedError
    def is_goal(self, state):
        raise NotImplementedError
    def expand(self, node):
        children = []
        for action in self.action(node.state):
            new_state = self.result(node.state, action)
            children.append(Node(new_state, node, action))
        return children


# -------- Tic Tac Toe --------

class TicTacToeProblem(Problem):
    def __init__(self, initial, player='X'):
        super().__init__(initial)
        self.player = player
    def action(self, state):
        return [i for i, c in enumerate(state) if c == ' ']
    def result(self, state, action):
        new_state = list(state)
        new_state[action] = self.player
        return new_state
    def is_goal(self, state):
        wins = [
            [0,1,2], [3,4,5], [6,7,8],
            [0,3,6], [1,4,7], [2,5,8],
            [0,4,8], [2,4,6]
        ]
        return any(state[a] == state[b] == state[c] == 'X' for a,b,c in wins)


# -------- BFS --------

def bfs(problem):
    node = Node(problem.initial)
    if problem.is_goal(node.state):
        return node
    frontier = deque([node])
    visited = set()
    visited.add(tuple(node.state))
    while frontier:
        node = frontier.popleft()
        for child in problem.expand(node):
            s = tuple(child.state)
            if problem.is_goal(child.state):
                return child
            if s not in visited:
                visited.add(s)
                frontier.append(child)
    return None


# -------- Agents --------

def bfs_agent(state, player='X'):
    problem = TicTacToeProblem(state, player)
    solution = bfs(problem)
    if solution and len(solution.path()) > 1:
        return solution.path()[1].action
    return None
def random_agent(state, player='O'):
    empty = [i for i, c in enumerate(state) if c == ' ']
    return random.choice(empty) if empty else None

# -------- Game Logic --------

def check_winner(state, player):
    wins = [
        [0,1,2], [3,4,5], [6,7,8],
        [0,3,6], [1,4,7], [2,5,8],
        [0,4,8], [2,4,6]
    ]
    return any(state[a] == state[b] == state[c] == player for a,b,c in wins)
def print_board(state):
    def cell(c):
        return c if c != ' ' else '&nbsp;'

    html = """
    <table border="1" cellpadding="10"
        style="border-collapse: collapse; text-align: center; font-size: 24px">
        <tr><td>{0}</td><td>{1}</td><td>{2}</td></tr>
        <tr><td>{3}</td><td>{4}</td><td>{5}</td></tr>
        <tr><td>{6}</td><td>{7}</td><td>{8}</td></tr>
    </table>
    """.format(*(cell(x) for x in state))

    container = document.getElementById("board-output")
    container.innerHTML += html + "<br>"

def play_game(agent_X, agent_O):
    state = [' '] * 9
    print_board(state)

    while True:
        move_X = agent_X(state, 'X')
        if move_X is None:
            display("DRAW!!!")
            break

        state[move_X] = 'X'
        print_board(state)

        if check_winner(state, 'X'):
            display("X WINS!!")
            break

        if ' ' not in state:
            display("DRAW!!!")
            break

        move_O = agent_O(state, 'O')
        if move_O is None:
            display("DRAW!!!")
            break

        state[move_O] = 'O'
        print_board(state)

        if check_winner(state, 'O'):
            display("O WINS!!")
            break


play_game(bfs_agent, random_agent)

  </py-script>
</div>
<div id="board-output"></div>
</body>
</html>
